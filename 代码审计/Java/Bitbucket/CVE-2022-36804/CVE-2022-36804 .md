- [CVE-2022-36804 Atlassian Bitbucket 命令注入](#cve-2022-36804-atlassian-bitbucket-命令注入)
  - [影响版本](#影响版本)
  - [环境搭建](#环境搭建)
  - [原理分析](#原理分析)
    - [Jersey框架](#jersey框架)
    - [Git攻击面](#git攻击面)
      - [Archive](#archive)
      - [Commit](#commit)
      - [%00](#00)
  - [漏洞复现](#漏洞复现)
  - [补丁](#补丁)
# CVE-2022-36804 Atlassian Bitbucket 命令注入
## 影响版本
Bitbucket  Server和Bitbucket Data Center-Atlassian
=7.6||=7.17||=7.21||=8.0||=8.1||=8.2||=8.3
## 环境搭建
`docker run --name="bitbucket" -d -p 7990:7990 -p 7999:7999 atlassian/bitbucket:8.3.0-ubuntu-jdk11`
## 原理分析
### Jersey框架
提Jersey框架是因为Atlassian Bitbucket的API接口正是使用的该框架,之前未遇到过，做此纪录。  
1. Jersey框架RESTFUL请求服务JAVA框架，与常规的JAVA编程使用的struts框架类似，它主要用于处理业务逻辑层。
2. Jersey提供一种子资源的概念，这也是RESTFull中提倡所有url都是资源。  

Jersey框架的路由配置需要被Spring扫描到：
1. 自定义资源配置类继承类ResourceConfig，通过register方法注册自己的资源。
2. 在bean中新建资源配置类ResourceConfig，并返回此config。
注册服务的时候有两种方式，一种是直接将类注册进去，一种是通过扫描包。

### Git攻击面
#### Archive 
#### Commit
#### %00
## 漏洞复现
## 补丁 